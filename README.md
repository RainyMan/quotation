# 大馬道路工程報價系統 (TarmacRoad Quotation System)

這是一個專為工程產業設計的高級線上報價與簽署系統。系統結合了便捷的 UI 介面、即時計算、歷史紀錄管理以及創新的甲方線上回簽功能。

## 🚀 核心功能

### 1. 專業報價管理
- **即時金額計算**：自動處理品項小計、合計、5% 營業稅及總計金額。
- **國字大寫轉換**：總計金額自動轉換為繁體中文大寫（如：壹拾萬零伍仟元整）。
- **品項與備註管理**：
    - **智能字典**：自帶品項與單位字典，支援快速選擇與單價帶入。儲存報價單時自動學習新紀錄。
    - **預設管理**：內建品項與常用備註管理選單，支援即時刪除與更新預設值。
- **廠商切換系統**：支援多廠商資料管理，可一鍵切換報價單開立主體（包含自動更換廠商印章）。

### 2. 歷史紀錄與版本控制
- **雲端同步**：報價單儲存後即時同步至雲端資料庫（PocketBase）。
- **複製新增**：支援以舊單為範本快速生成新報價單。
- **版本排序**：可依照日期、最後更新時間進行排序，方便追蹤進度。

### 3. 線上回簽功能 (甲方)
- **專屬分享連結**：支援產生唯一加密分享網址，甲方無需登入即可瀏覽。
- **互動式簽署**：甲方可在線上直接進行「手寫簽名」或「上傳電子章」。
- **防竄改機制**：分享模式下全表單自動轉為唯讀，僅保留回簽區塊。
- **簽章管理**：管理端可隨時查看甲方簽署狀態（標籤顯示：未簽名/已回簽），並支援簽章刪除功能。

### 4. 輸出與列印 (Perfect Layout)
- **A4 專業排版**：精準適配 A4 列印格式，確保「所見即所得」，支援高品質單頁 PDF 匯出。
- **自動檔名設定**：列印時自動將檔名設為「公司名稱_工程名稱」，強化歸檔效率。
- **印章動態縮放**：提供滑桿實時調整甲乙雙方簽章大小，確保排版美觀。

## 🛠 技術棧
- **Frontend**: HTML5, Vanilla CSS, JavaScript (ES6+)
- **CSS Framework**: Bootstrap 5.3 + Custom CSS
- **Backend**: PocketBase (BaaS)
- **Library**: Signature Pad (電子簽名處理), Google Fonts (Outfit, Noto Sans TC)

## 📁 資料庫結構 (PocketBase)
欲自行部署，需於 PocketBase 建立以下集合 (Collections)：
- `quotations`: 儲存報價單主體資料。
- `vendors`: 存放公司/廠商的基本資料與印章。
- `items`: 品項字典（自動去重儲存）。
- `memo_presets`: 常用補充說明預設值。
- `system_config`: 儲存系統全域設定（如：PIN 碼）。

## 🛡 安全機制
- **6 位數 PIN 碼保護**：管理後台由安全 PIN 碼守護，防止未授權存取。
- **安全重設流程**：內建變更密碼機制，需驗證舊碼以確保帳戶安全。
- **行動優先 (RWD)**：全介面支援手機操作，無論是現場報價或登入管理皆能流暢體驗。

---
*Developed with excellence by Antigravity AI for TarmacRoad.*
